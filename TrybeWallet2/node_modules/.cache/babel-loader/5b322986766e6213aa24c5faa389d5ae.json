{"ast":null,"code":"import _classCallCheck from\"/home/clair/Documentos/trybe/Projetos/sd-021-b-project-trybewallet/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/clair/Documentos/trybe/Projetos/sd-021-b-project-trybewallet/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/clair/Documentos/trybe/Projetos/sd-021-b-project-trybewallet/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/clair/Documentos/trybe/Projetos/sd-021-b-project-trybewallet/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import{connect}from'react-redux';import{saveCurrencies}from'../actions';import Form from'./Form';import Table from'./Table';var Wallet=/*#__PURE__*/function(_React$Component){_inherits(Wallet,_React$Component);var _super=_createSuper(Wallet);function Wallet(){var _this;_classCallCheck(this,Wallet);_this=_super.call(this);_this.calcDespesaTotal=function(){var expenses=_this.props.expenses;var despesaIndividual=expenses.map(function(elem){var currency=elem.currency;var resultado=elem.value*elem.exchangeRates[currency].ask;// está acessando no rates o mesmo nome da currency\nreturn resultado;});var despesaTotal=despesaIndividual.reduce(function(soma,despesa){return soma+despesa;},0);return despesaTotal.toFixed(2);};_this.state={currencies:'BRL'};return _this;}_createClass(Wallet,[{key:\"componentDidMount\",value:function componentDidMount(){var dispatch=this.props.dispatch;fetch('https://economia.awesomeapi.com.br/json/all').then(function(response){return response.json();}).then(function(currencies){return dispatch(saveCurrencies(Object.keys(currencies).filter(function(coins){return coins!=='USDT';})));});}// pegar value do input e o currency\n// achar o ask do currency e * o value\n},{key:\"render\",value:function render(){var email=this.props.email;var currencies=this.state.currencies;return/*#__PURE__*/React.createElement(\"header\",null,/*#__PURE__*/React.createElement(\"h1\",null,\"TrybeWallet\"),/*#__PURE__*/React.createElement(\"h3\",{\"data-testid\":\"email-field\"},email),/*#__PURE__*/React.createElement(\"h3\",{\"data-testid\":\"total-field\"},this.calcDespesaTotal()),/*#__PURE__*/React.createElement(\"h3\",{\"data-testid\":\"header-currency-field\"},' ',currencies,' '),/*#__PURE__*/React.createElement(Form,null),/*#__PURE__*/React.createElement(Table,null));}}]);return Wallet;}(React.Component);var mapStateToProps=function mapStateToProps(globalState){return{email:globalState.user.email,expenses:globalState.wallet.expenses};};export default connect(mapStateToProps)(Wallet);","map":{"version":3,"names":["React","connect","saveCurrencies","Form","Table","Wallet","calcDespesaTotal","expenses","props","despesaIndividual","map","elem","currency","resultado","value","exchangeRates","ask","despesaTotal","reduce","soma","despesa","toFixed","state","currencies","dispatch","fetch","then","response","json","Object","keys","filter","coins","email","Component","mapStateToProps","globalState","user","wallet"],"sources":["/home/clair/Documentos/trybe/Projetos/sd-021-b-project-trybewallet/src/pages/Wallet.js"],"sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { saveCurrencies } from '../actions';\nimport Form from './Form';\nimport Table from './Table';\n\nclass Wallet extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      currencies: 'BRL',\n    };\n  }\n\n  componentDidMount() {\n    const { dispatch } = this.props;\n    fetch('https://economia.awesomeapi.com.br/json/all')\n      .then((response) => response.json())\n      .then((currencies) => dispatch(saveCurrencies(Object.keys(currencies)\n        .filter((coins) => coins !== 'USDT'))));\n  }\n  // pegar value do input e o currency\n  // achar o ask do currency e * o value\n\n  calcDespesaTotal = () => {\n    const { expenses } = this.props;\n    const despesaIndividual = expenses.map((elem) => {\n      const { currency } = elem;\n      const resultado = elem.value * elem.exchangeRates[currency].ask; // está acessando no rates o mesmo nome da currency\n      return resultado;\n    });\n    const despesaTotal = despesaIndividual.reduce((soma, despesa) => soma + despesa, 0);\n    return despesaTotal.toFixed(2);\n  }\n\n  render() {\n    const { email } = this.props;\n    const { currencies } = this.state;\n    return (\n      <header>\n        <h1>TrybeWallet</h1>\n        <h3 data-testid=\"email-field\">{email}</h3>\n        <h3 data-testid=\"total-field\">\n          { this.calcDespesaTotal() }\n        </h3>\n        <h3 data-testid=\"header-currency-field\">\n          {' '}\n          {currencies}\n          {' '}\n        </h3>\n        <Form />\n        <Table />\n      </header>\n    );\n  }\n}\nconst mapStateToProps = (globalState) => ({\n  email: globalState.user.email,\n  expenses: globalState.wallet.expenses,\n});\nexport default connect(mapStateToProps)(Wallet);\n\nWallet.propTypes = {\n  email: PropTypes.string.isRequired,\n  dispatch: PropTypes.func.isRequired,\n  expenses: PropTypes.arrayOf(PropTypes.object).isRequired,\n};\n"],"mappings":"glBAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,OAASC,OAAT,KAAwB,aAAxB,CAEA,OAASC,cAAT,KAA+B,YAA/B,CACA,MAAOC,KAAP,KAAiB,QAAjB,CACA,MAAOC,MAAP,KAAkB,SAAlB,C,GAEMC,O,4GACJ,iBAAc,wCACZ,wBADY,MAiBdC,gBAjBc,CAiBK,UAAM,CACvB,GAAQC,SAAR,CAAqB,MAAKC,KAA1B,CAAQD,QAAR,CACA,GAAME,kBAAiB,CAAGF,QAAQ,CAACG,GAAT,CAAa,SAACC,IAAD,CAAU,CAC/C,GAAQC,SAAR,CAAqBD,IAArB,CAAQC,QAAR,CACA,GAAMC,UAAS,CAAGF,IAAI,CAACG,KAAL,CAAaH,IAAI,CAACI,aAAL,CAAmBH,QAAnB,EAA6BI,GAA5D,CAAiE;AACjE,MAAOH,UAAP,CACD,CAJyB,CAA1B,CAKA,GAAMI,aAAY,CAAGR,iBAAiB,CAACS,MAAlB,CAAyB,SAACC,IAAD,CAAOC,OAAP,QAAmBD,KAAI,CAAGC,OAA1B,EAAzB,CAA4D,CAA5D,CAArB,CACA,MAAOH,aAAY,CAACI,OAAb,CAAqB,CAArB,CAAP,CACD,CA1Ba,CAEZ,MAAKC,KAAL,CAAa,CACXC,UAAU,CAAE,KADD,CAAb,CAFY,aAKb,C,oDAED,4BAAoB,CAClB,GAAQC,SAAR,CAAqB,KAAKhB,KAA1B,CAAQgB,QAAR,CACAC,KAAK,CAAC,6CAAD,CAAL,CACGC,IADH,CACQ,SAACC,QAAD,QAAcA,SAAQ,CAACC,IAAT,EAAd,EADR,EAEGF,IAFH,CAEQ,SAACH,UAAD,QAAgBC,SAAQ,CAACtB,cAAc,CAAC2B,MAAM,CAACC,IAAP,CAAYP,UAAZ,EAC3CQ,MAD2C,CACpC,SAACC,KAAD,QAAWA,MAAK,GAAK,MAArB,EADoC,CAAD,CAAf,CAAxB,EAFR,EAID,CACD;AACA;sBAaA,iBAAS,CACP,GAAQC,MAAR,CAAkB,KAAKzB,KAAvB,CAAQyB,KAAR,CACA,GAAQV,WAAR,CAAuB,KAAKD,KAA5B,CAAQC,UAAR,CACA,mBACE,+CACE,4CADF,cAEE,0BAAI,cAAY,aAAhB,EAA+BU,KAA/B,CAFF,cAGE,0BAAI,cAAY,aAAhB,EACI,KAAK3B,gBAAL,EADJ,CAHF,cAME,0BAAI,cAAY,uBAAhB,EACG,GADH,CAEGiB,UAFH,CAGG,GAHH,CANF,cAWE,oBAAC,IAAD,MAXF,cAYE,oBAAC,KAAD,MAZF,CADF,CAgBD,C,oBAhDkBvB,KAAK,CAACkC,S,EAkD3B,GAAMC,gBAAe,CAAG,QAAlBA,gBAAkB,CAACC,WAAD,QAAkB,CACxCH,KAAK,CAAEG,WAAW,CAACC,IAAZ,CAAiBJ,KADgB,CAExC1B,QAAQ,CAAE6B,WAAW,CAACE,MAAZ,CAAmB/B,QAFW,CAAlB,EAAxB,CAIA,cAAeN,QAAO,CAACkC,eAAD,CAAP,CAAyB9B,MAAzB,CAAf"},"metadata":{},"sourceType":"module"}