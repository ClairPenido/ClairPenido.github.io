{"ast":null,"code":"import _objectSpread from\"/home/clair/Documentos/trybe/Projetos/sd-021-b-project-trybewallet/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/home/clair/Documentos/trybe/Projetos/sd-021-b-project-trybewallet/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/home/clair/Documentos/trybe/Projetos/sd-021-b-project-trybewallet/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classCallCheck from\"/home/clair/Documentos/trybe/Projetos/sd-021-b-project-trybewallet/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/clair/Documentos/trybe/Projetos/sd-021-b-project-trybewallet/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/clair/Documentos/trybe/Projetos/sd-021-b-project-trybewallet/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/clair/Documentos/trybe/Projetos/sd-021-b-project-trybewallet/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"/home/clair/Documentos/trybe/Projetos/sd-021-b-project-trybewallet/node_modules/@babel/runtime/regenerator/index.js\";import React from'react';import{connect}from'react-redux';import{saveExpenses}from'../actions';var Form=/*#__PURE__*/function(_React$Component){_inherits(Form,_React$Component);var _super=_createSuper(Form);function Form(){var _this;_classCallCheck(this,Form);_this=_super.call(this);_this.handleChange=function(_ref){var target=_ref.target;// pegar o value dos inputs de forma dinamica\nvar name=target.name,value=target.value;_this.setState(_defineProperty({},name,value));};_this.handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var _this$props,addExpenses,expenses,id;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_this$props=_this.props,addExpenses=_this$props.addExpenses,expenses=_this$props.expenses;id=_this.state.id;_this.setState({id:expenses.length===0?0:id+1});_context.next=6;return fetch('https://economia.awesomeapi.com.br/json/all').then(function(response){return response.json();}).then(function(currencies){return addExpenses(_this.state,currencies);});case 6:_this.setState(_objectSpread(_objectSpread({},_this.estadoInicial),{},{id:id}));case 7:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}();_this.state={id:0,value:'',description:'',currency:'USD',method:'Dinheiro',tag:'Alimentação',exchangeRates:{}};return _this;}_createClass(Form,[{key:\"componentDidMount\",value:function componentDidMount(){this.estadoInicial=_objectSpread({},this.state);}},{key:\"render\",value:function render(){var _this$state=this.state,value=_this$state.value,description=_this$state.description,currency=_this$state.currency,method=_this$state.method,tag=_this$state.tag;var currencies=this.props.currencies;return/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"value-input\"},\"Valor da despesa:\",' ',/*#__PURE__*/React.createElement(\"input\",{\"data-testid\":\"value-input\",id:\"value-input\",name:\"value\",type:\"number\",value:value,onChange:this.handleChange})),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"description-input\"},\"Descri\\xE7\\xE3o:\",' ',/*#__PURE__*/React.createElement(\"input\",{\"data-testid\":\"description-input\",id:\"description-input\",type:\"textArea\",name:\"description\",value:description,onChange:this.handleChange})),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"moeda\"},\"Moeda:\",' ',/*#__PURE__*/React.createElement(\"select\",{name:\"currency\",id:\"moeda\",value:currency,onChange:this.handleChange},currencies.map(function(coins){return/*#__PURE__*/React.createElement(\"option\",{key:coins,value:coins},coins);}))),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"method-input\"},\"M\\xE9todo de pagamento:\",' ',/*#__PURE__*/React.createElement(\"select\",{\"data-testid\":\"method-input\",name:\"method\",id:\"method-input\",value:method,onChange:this.handleChange},/*#__PURE__*/React.createElement(\"option\",{value:\"Dinheiro\"},\"Dinheiro\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Cart\\xE3o de cr\\xE9dito\"},\"Cart\\xE3o de cr\\xE9dito\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Cart\\xE3o de d\\xE9bito\"},\"Cart\\xE3o de d\\xE9bito\"))),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"tag-input\"},\"M\\xE9todo de pagamento:\",' ',/*#__PURE__*/React.createElement(\"select\",{\"data-testid\":\"tag-input\",name:\"tag\",id:\"tag-input\",value:tag,onChange:this.handleChange},/*#__PURE__*/React.createElement(\"option\",{value:\"Alimenta\\xE7\\xE3o\"},\"Alimenta\\xE7\\xE3o\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Lazer\"},\"Lazer\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Trabalho\"},\"Trabalho\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Transporte\"},\"Transporte\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Sa\\xFAde\"},\"Sa\\xFAde\"))),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",onClick:this.addDespesa},\"Adicionar despesa\"));}}]);return Form;}(React.Component);var mapStateToProps=function mapStateToProps(globalState){return{currencies:globalState.wallet.currencies,expenses:globalState.wallet.expenses};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{// para ler estados\naddExpenses:function addExpenses(input,exchangeRates){return dispatch(saveExpenses(input,exchangeRates));}};};export default connect(mapStateToProps,mapDispatchToProps)(Form);","map":{"version":3,"names":["React","connect","saveExpenses","Form","handleChange","target","name","value","setState","handleSubmit","event","preventDefault","props","addExpenses","expenses","id","state","length","fetch","then","response","json","currencies","estadoInicial","description","currency","method","tag","exchangeRates","map","coins","addDespesa","Component","mapStateToProps","globalState","wallet","mapDispatchToProps","dispatch","input"],"sources":["/home/clair/Documentos/trybe/Projetos/sd-021-b-project-trybewallet/src/pages/Form.js"],"sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { saveExpenses } from '../actions';\n\nclass Form extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      id: 0,\n      value: '',\n      description: '',\n      currency: 'USD',\n      method: 'Dinheiro',\n      tag: 'Alimentação',\n      exchangeRates: {},\n    };\n  }\n\n  componentDidMount() {\n    this.estadoInicial = { ...this.state };\n  }\n\n  handleChange = ({ target }) => { // pegar o value dos inputs de forma dinamica\n    const { name, value } = target;\n    this.setState({ [name]: value });\n  };\n\n  handleSubmit = async (event) => {\n    event.preventDefault();\n    const { addExpenses, expenses } = this.props;\n    const { id } = this.state;\n    this.setState({\n      id: expenses.length === 0 ? 0 : id + 1,\n    });\n    await fetch('https://economia.awesomeapi.com.br/json/all')\n      .then((response) => response.json())\n      .then((currencies) => addExpenses(this.state, currencies));\n    this.setState({ ...this.estadoInicial, id });\n  }\n\n  render() {\n    const { value, description, currency, method, tag } = this.state;\n    const { currencies } = this.props;\n    return (\n      <form onSubmit={ this.handleSubmit }>\n        <label htmlFor=\"value-input\">\n          Valor da despesa:\n          {' '}\n          <input\n            data-testid=\"value-input\"\n            id=\"value-input\"\n            name=\"value\"\n            type=\"number\"\n            value={ value }\n            onChange={ this.handleChange }\n          />\n        </label>\n        <label htmlFor=\"description-input\">\n          Descrição:\n          {' '}\n          <input\n            data-testid=\"description-input\"\n            id=\"description-input\"\n            type=\"textArea\"\n            name=\"description\"\n            value={ description }\n            onChange={ this.handleChange }\n          />\n        </label>\n        <label htmlFor=\"moeda\">\n          Moeda:\n          {' '}\n          <select\n            name=\"currency\"\n            id=\"moeda\"\n            value={ currency }\n            onChange={ this.handleChange }\n          >\n            {currencies.map((coins) => (\n              <option key={ coins } value={ coins }>{ coins }</option>))}\n          </select>\n        </label>\n        <label htmlFor=\"method-input\">\n          Método de pagamento:\n          {' '}\n          <select\n            data-testid=\"method-input\"\n            name=\"method\"\n            id=\"method-input\"\n            value={ method }\n            onChange={ this.handleChange }\n          >\n            <option value=\"Dinheiro\">Dinheiro</option>\n            <option value=\"Cartão de crédito\">Cartão de crédito</option>\n            <option value=\"Cartão de débito\">Cartão de débito</option>\n          </select>\n        </label>\n        <label htmlFor=\"tag-input\">\n          Método de pagamento:\n          {' '}\n          <select\n            data-testid=\"tag-input\"\n            name=\"tag\"\n            id=\"tag-input\"\n            value={ tag }\n            onChange={ this.handleChange }\n          >\n            <option value=\"Alimentação\">Alimentação</option>\n            <option value=\"Lazer\">Lazer</option>\n            <option value=\"Trabalho\">Trabalho</option>\n            <option value=\"Transporte\">Transporte</option>\n            <option value=\"Saúde\">Saúde</option>\n          </select>\n        </label>\n        <button\n          type=\"submit\"\n          onClick={ this.addDespesa }\n        >\n          Adicionar despesa\n        </button>\n      </form>\n    );\n  }\n}\nconst mapStateToProps = (globalState) => ({\n  currencies: globalState.wallet.currencies,\n  expenses: globalState.wallet.expenses,\n});\nconst mapDispatchToProps = (dispatch) => ({ // para ler estados\n  addExpenses: (input, exchangeRates) => dispatch(saveExpenses(input, exchangeRates)),\n});\n\nForm.propTypes = {\n  currencies: PropTypes.arrayOf(PropTypes.string).isRequired,\n  expenses: PropTypes.arrayOf(PropTypes.object).isRequired,\n  addExpenses: PropTypes.func.isRequired,\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Form);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}